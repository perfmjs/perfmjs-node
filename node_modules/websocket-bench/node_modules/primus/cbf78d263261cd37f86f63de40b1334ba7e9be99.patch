From cbf78d263261cd37f86f63de40b1334ba7e9be99 Mon Sep 17 00:00:00 2001
From: 3rd-Eden <info@3rd-Eden.com>
Date: Mon, 30 Dec 2013 11:39:48 +0100
Subject: [PATCH] [fix] Corrected the requirejs inheritance.

Fixes cayasso/primus-emitter#14 cc @ruimarinho
---
 index.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/index.js b/index.js
index b530420..acfa4a6 100644
--- a/index.js
+++ b/index.js
@@ -349,7 +349,7 @@ Primus.prototype.library = function compile(nodejs) {
     + '  if (typeof module !== "undefined" && module.exports) {'
     + '    module.exports = context[name];'
     + '  } else if (typeof define == "function" && define.amd) {'
-    + '    define(definition);'
+    + '    define(function reference() { return context[name]; });'
     + '  }'
     + '})("Primus", this, function PRIMUS() {'
     + this.client;
-- 
1.8.5.1

